!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.tenaciousFetch=t()}(this,function(){function e(e,r,n){return new Promise(function(i,o){!function e(r,n,u){var f=n.retryStatus;(0,n.fetcher)(r,n).then(function(c){if(f.includes(c.status))if(u>0){var s=t(n,--u);n.onRetry&&"function"==typeof n.onRetry&&n.onRetry({retriesLeft:u,retryDelay:s}),setTimeout(function(){return e(r,n,u)},s)}else o(c);else i(c)}).catch(function(i){if(u>0){var f=t(n,--u);n.onRetry&&"function"==typeof n.onRetry&&n.onRetry({retriesLeft:u,retryDelay:f}),setTimeout(function(){return e(r,n,u)},f)}else o(i)})}(r,n,e)})}function t(e,t){var r=e.retryDelay,n=e.factor,i=e.retries;return n&&"number"==typeof n&&Number.isInteger(n)?function(e,t){return Math.pow(e,t)}(n,i-t):r*(i-t)}var r=!1;try{r=window&&window.fetch}catch(e){}return function(t,n){if(void 0===t&&(t=""),void 0===n&&(n={}),!(n=Object.assign({retries:1,retryDelay:1e3,retryStatus:[],fetcher:r,timeout:void 0},n)).fetcher||"function"!=typeof n.fetcher)throw new Error("tenacious-fetch: No fetch implementation found. Provide a valid fetch implementation via the fetcher configuration property.");"string"!=typeof n.retryStatus&&"number"!=typeof n.retryStatus||(n.retryStatus=[Number.parseInt(n.retryStatus)]);var i=n.timeout;return i&&Number.isInteger(i)?Promise.race([e(n.retries,t,n),new Promise(function(e,t){return setTimeout(function(){return t(new Error("Anslutningen till servern misslyckades, kontrollera din internetanslutning"))},i)})]):e(n.retries,t,n)}});
//# sourceMappingURL=tenacious-fetch.umd.js.map
